
# ğŸ§ Linux `screen` å¿«é€Ÿå‚è€ƒæ‰‹å†Œï¼ˆCheatsheetï¼‰

## ğŸ”¹ åŸºæœ¬å‘½ä»¤

| æ“ä½œ | å‘½ä»¤ |
|------|------|
| å¯åŠ¨ä¸€ä¸ªæ–°çš„ä¼šè¯ | `screen` |
| å¯åŠ¨å‘½åä¼šè¯ | `screen -S session_name` |
| æŸ¥çœ‹æ‰€æœ‰ä¼šè¯ | `screen -ls` |
| æ¢å¤ä¼šè¯ | `screen -r session_name_or_pid` |
| å¼ºåˆ¶æ¢å¤ä¼šè¯ | `screen -dr session_name_or_pid` |
| æ–°å»ºåå°ä¼šè¯å¹¶è¿è¡Œå‘½ä»¤ | `screen -dmS session_name command` |
| ç»“æŸå½“å‰ä¼šè¯ | åœ¨ screen ä¸­è¾“å…¥ `exit` æˆ– `Ctrl + a :quit` |

## ğŸ”¹ å¿«æ·é”®ï¼ˆå‰ç¼€ï¼š`Ctrl + a`ï¼‰

> æ‰€æœ‰å¿«æ·é”®æ“ä½œéƒ½åœ¨è¿›å…¥ `screen` ä¼šè¯åç”Ÿæ•ˆã€‚

| å¿«æ·é”®                | åŠŸèƒ½                                        |
| --------------------- | ------------------------------------------- |
| `Ctrl + a` ç„¶å `c`   | åˆ›å»ºä¸€ä¸ªæ–°çª—å£                              |
| `Ctrl + a` ç„¶å `n`   | åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªçª—å£                            |
| `Ctrl + a` ç„¶å `p`   | åˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªçª—å£                            |
| `Ctrl + a` ç„¶å `0-9` | åˆ‡æ¢åˆ°ç¼–å·ä¸º 0~9 çš„çª—å£                     |
| `Ctrl + a` ç„¶å `"`   | æ˜¾ç¤ºçª—å£åˆ—è¡¨ï¼Œé€‰æ‹©åˆ‡æ¢                      |
| `Ctrl + a` ç„¶å `'`   | è¾“å…¥çª—å£ç¼–å·è·³è½¬                            |
| `Ctrl + a` ç„¶å `d`   | æ–­å¼€ä¼šè¯ï¼ˆDetachï¼‰                          |
| `Ctrl + a` ç„¶å `k`   | æ€æ­»å½“å‰çª—å£ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰                    |
| `Ctrl + a` ç„¶å `?`   | æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯                                |
| `Ctrl + a` ç„¶å `H`   | å¼€å§‹/åœæ­¢è®°å½•ç»ˆç«¯æ—¥å¿—ï¼ˆç”Ÿæˆ `screenlog.0`ï¼‰ |
| `Ctrl + a` ç„¶å `[`   | è¿›å…¥å¤åˆ¶æ¨¡å¼ï¼ˆæ»šåŠ¨ã€æœç´¢ã€å¤åˆ¶ï¼‰            |
| `Ctrl + a` ç„¶å `]`   | ç²˜è´´ç¼“å†²åŒºå†…å®¹                              |

---

## ğŸ”¹ ç®¡ç†ä¼šè¯çš„é«˜çº§å‘½ä»¤

| æ“ä½œ               | å‘½ä»¤                                               |
| ------------------ | -------------------------------------------------- |
| æ€æ­»æŸä¸ªä¼šè¯       | `screen -X -S session_id quit`                     |
| å‘é€å‘½ä»¤åˆ°åå°ä¼šè¯ | `screen -S session_name -X stuff 'your_command\n'` |
| åœ¨åå°è¿è¡Œå‘½ä»¤     | `screen -dmS mysession ping google.com`            |

---

## ğŸ”¹ é…ç½®æ–‡ä»¶ç¤ºä¾‹ï¼ˆ`~/.screenrc`ï¼‰

```bash
# è‡ªåŠ¨åˆ›å»ºå¸¦æ ‡ç­¾çš„çª—å£
screen -t "main" 0
screen -t "logs" 1

# è®¾ç½®çŠ¶æ€æ æ˜¾ç¤ºä¸»æœºåã€æ—¶é—´ç­‰ä¿¡æ¯
hardstatus alwayslastline
hardstatus string '%{= kG}[ %{G}%H %{g}][%= %{=kw}%?%-Lw%?%{r}(%{W}%n*%f %t%?(%u)%?%{r})%{w}%?%+Lw%?%=%{g} ][%{B}%Y-%m-%d %{W}%c %{g}]'
```

---

## ğŸ”¹ å°æŠ€å·§

- ğŸ’¡ ä½¿ç”¨å‘½åä¼šè¯æ›´å®¹æ˜“ç®¡ç†å¤šä¸ªä»»åŠ¡ã€‚
- ğŸ’¡ `screen -x` å¯ä»¥å¤šç”¨æˆ·å…±äº«åŒä¸€ä¸ªä¼šè¯ï¼ˆåä½œè°ƒè¯•æ—¶éå¸¸æœ‰ç”¨ï¼‰ã€‚
- ğŸ’¡ è®°å½•æ—¥å¿—åŠŸèƒ½é€‚åˆè°ƒè¯•å’Œå®¡è®¡ã€‚

---

## ğŸ“„ ç¤ºä¾‹æµç¨‹

### å¯åŠ¨åå°ä»»åŠ¡å¹¶æŸ¥çœ‹è¾“å‡ºï¼š

```bash
screen -dmS mytask ping baidu.com
screen -r mytask
```

### åˆ›å»ºå¤šä¸ªçª—å£å¹¶åˆ‡æ¢ï¼š

```bash
screen -S demo
Ctrl + a c      # åˆ›å»ºç¬¬äºŒä¸ªçª—å£
Ctrl + a "      # æŸ¥çœ‹çª—å£åˆ—è¡¨
Ctrl + a n/p    # åˆ‡æ¢çª—å£
```

