`sed` æ˜¯ä¸€ä¸ªæµç¼–è¾‘å™¨ï¼ˆStream Editorï¼‰ï¼Œç”¨äºå¯¹æ–‡æœ¬è¿›è¡ŒåŸºæœ¬çš„æ–‡æœ¬è½¬æ¢ã€‚å®ƒå¯ä»¥åœ¨ä¸äº¤äº’çš„æƒ…å†µä¸‹å¯¹æ–‡ä»¶æˆ–è¾“å…¥æµè¿›è¡Œç¼–è¾‘ï¼Œå¸¸ç”¨äºè„šæœ¬ä¸­å¤„ç†æ–‡æœ¬æ•°æ®ã€‚

ä»¥ä¸‹æ˜¯ `sed` çš„ç®€æ˜ä¸­æ–‡æ‰‹å†Œï¼Œæ¶µç›–å¸¸ç”¨å‘½ä»¤ã€è¯­æ³•å’Œç¤ºä¾‹ï¼š

---

## ğŸ“˜ ä¸€ã€sed åŸºæœ¬è¯­æ³•

```bash
sed [é€‰é¡¹] 'ç¼–è¾‘å‘½ä»¤' æ–‡ä»¶å
```

æˆ–è€…ä»ç®¡é“è¾“å…¥ï¼š

```bash
command | sed 'ç¼–è¾‘å‘½ä»¤'
```

---

## ğŸ“— äºŒã€å¸¸ç”¨é€‰é¡¹ï¼ˆOptionsï¼‰

| é€‰é¡¹ | è¯´æ˜ |
|------|------|
| `-n` | é™é»˜æ¨¡å¼ï¼Œåªè¾“å‡ºåŒ¹é…å¤„ç†çš„è¡Œ |
| `-e` | å…è®¸åŒæ—¶æŒ‡å®šå¤šä¸ªç¼–è¾‘å‘½ä»¤ |
| `-f` | ä»æ–‡ä»¶ä¸­è¯»å–ç¼–è¾‘å‘½ä»¤ |
| `-i` | ç›´æ¥ä¿®æ”¹æ–‡ä»¶å†…å®¹ï¼ˆæ…ç”¨ï¼‰ |
| `-r` æˆ– `-E` | å¯ç”¨æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼ |

---

## ğŸ“™ ä¸‰ã€å¸¸ç”¨å‘½ä»¤ï¼ˆç¼–è¾‘å‘½ä»¤ï¼‰

### 1. æ‰“å°ï¼ˆPrintï¼‰

- æ‰“å°ç¬¬ 3 è¡Œï¼š
  ```bash
  sed -n '3p' filename
  ```

- æ‰“å° 2 åˆ° 5 è¡Œï¼š
  ```bash
  sed -n '2,5p' filename
  ```

- æ‰“å°åŒ¹é… "hello" çš„è¡Œï¼š
  ```bash
  sed -n '/hello/p' filename
  ```

- æ‰“å°ä» "start" åˆ° "end" çš„æ®µè½ï¼š
  ```bash
  sed -n '/start/,/end/p' filename
  ```

---

### 2. åˆ é™¤ï¼ˆDeleteï¼‰

- åˆ é™¤ç¬¬ 3 è¡Œï¼š
  ```bash
  sed '3d' filename
  ```

- åˆ é™¤æ‰€æœ‰åŒ…å« "error" çš„è¡Œï¼š
  ```bash
  sed '/error/d' filename
  ```

- åˆ é™¤ç©ºè¡Œï¼š
  ```bash
  sed '/^$/d' filename
  ```

---

### 3. æ›¿æ¢ï¼ˆSubstituteï¼‰

åŸºæœ¬æ ¼å¼ï¼š

```bash
s/åŸå­—ç¬¦ä¸²/æ›¿æ¢å­—ç¬¦ä¸²/[flags]
```

- æ›¿æ¢æ¯è¡Œç¬¬ä¸€ä¸ª "apple" ä¸º "orange"ï¼š
  ```bash
  sed 's/apple/orange/' filename
  ```

- æ›¿æ¢æ‰€æœ‰ "apple"ï¼š
  ```bash
  sed 's/apple/orange/g' filename
  ```

- åªæ›¿æ¢ç¬¬ 3 è¡Œä¸­çš„ "apple"ï¼š
  ```bash
  sed '3 s/apple/orange/g' filename
  ```

- æ›¿æ¢åŒ¹é…è¡Œä¸­çš„å†…å®¹ï¼š
  ```bash
  sed '/error/s/this/that/g' filename
  ```

- ä½¿ç”¨ä¸åŒåˆ†éš”ç¬¦ï¼ˆå¦‚ `#`ï¼‰é¿å…ä¸è·¯å¾„å†²çªï¼š
  ```bash
  sed 's#/usr/bin#/usr/local/bin#g' filename
  ```

---

### 4. æ’å…¥ï¼ˆInsertï¼‰ã€è¿½åŠ ï¼ˆAppendï¼‰

- åœ¨ç¬¬ 3 è¡Œå‰æ’å…¥ä¸€è¡Œï¼š
  ```bash
  sed '3i\This is a new line' filename
  ```

- åœ¨ç¬¬ 3 è¡Œåæ·»åŠ ä¸€è¡Œï¼š
  ```bash
  sed '3a\Another new line' filename
  ```

- åœ¨åŒ¹é…è¡Œåæ·»åŠ å¤šè¡Œï¼š
  ```bash
  sed '/pattern/r file_to_insert.txt' filename
  ```

---

### 5. æ›´æ”¹æ•´è¡Œï¼ˆChangeï¼‰

- å°†ç¬¬ 3 è¡Œæ›¿æ¢ä¸ºæ–°å†…å®¹ï¼š
  ```bash
  sed '3c\New content here' filename
  ```

---

### 6. è½¬æ¢å­—ç¬¦ï¼ˆTranslateï¼‰

- å°†å°å†™è½¬ä¸ºå¤§å†™ï¼ˆä»…é™ GNU sedï¼‰ï¼š
  ```bash
  sed 'y/abc/ABC/' filename
  ```

---

### 7. å†™å…¥åˆ°æ–‡ä»¶ï¼ˆWriteï¼‰

- å°†åŒ¹é…è¡Œå†™å…¥å¦ä¸€ä¸ªæ–‡ä»¶ï¼š
  ```bash
  sed -n '/error/w error.log' filename
  ```

---

## ğŸ“• å››ã€é«˜çº§æŠ€å·§

### å¤šå‘½ä»¤æ‰§è¡Œ

- ä½¿ç”¨ `-e` æŒ‡å®šå¤šä¸ªå‘½ä»¤ï¼š
  ```bash
  sed -e 's/foo/bar/' -e 's/baz/qux/' filename
  ```

- æˆ–åœ¨å•å¼•å·ä¸­ä½¿ç”¨åˆ†å·ï¼š
  ```bash
  sed 's/foo/bar/; s/baz/qux/' filename
  ```

### åˆ†ç»„ä¸å¼•ç”¨ï¼ˆéœ€é…åˆæ­£åˆ™æ•è·ï¼‰

- æå– IP åœ°å€ç¤ºä¾‹ï¼š
  ```bash
  echo "IP: 192.168.1.1" | sed -E 's/.*([0-9]+\.[0-9]+\.[0-9]+\.[0-9]+).*/\1/'
  ```

### æ¨¡æ‹Ÿ grep åŠŸèƒ½

```bash
sed -n '/pattern/p' filename
```

---

## ğŸ““ äº”ã€å®æˆ˜ç¤ºä¾‹

### ç¤ºä¾‹ 1ï¼šæ‰¹é‡æ›¿æ¢ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶ä¸­çš„å­—ç¬¦ä¸²ï¼ˆæ…ç”¨ï¼ï¼‰

```bash
sed -i 's/old_string/new_string/g' *.txt
```

### ç¤ºä¾‹ 2ï¼šåˆ é™¤æ³¨é‡Šè¡Œå’Œç©ºè¡Œ

```bash
sed -e 's/#.*//' -e '/^$/d' config.conf
```

### ç¤ºä¾‹ 3ï¼šæå– HTTP çŠ¶æ€ç æ—¥å¿—

```bash
sed -n '/HTTP\/1.1" 404/p' access.log
```

---

## ğŸ“’ å…­ã€æ³¨æ„äº‹é¡¹

- `sed -i` ä¼šç›´æ¥ä¿®æ”¹åŸæ–‡ä»¶ï¼Œè¯·å¤‡ä»½åå†æ“ä½œã€‚
- æ­£åˆ™è¡¨è¾¾å¼é»˜è®¤æ˜¯**åŸºç¡€æ­£åˆ™è¡¨è¾¾å¼ï¼ˆBREï¼‰**ï¼Œä½¿ç”¨ `-r` æˆ– `-E` å¼€å¯**æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼ï¼ˆEREï¼‰**ã€‚
- å¦‚æœè¦å¤„ç† Unicode æ–‡æœ¬ï¼Œè¯·ç¡®ä¿ç»ˆç«¯ç¼–ç ä¸€è‡´ï¼ˆå¦‚ UTF-8ï¼‰ã€‚

---

## ğŸ“œ ä¸ƒã€å‚è€ƒèµ„æ–™

- `man sed`
- ã€ŠSed & Awkã€‹ by Dale Dougherty, Arnold Robbins
- GNU Sed å®˜æ–¹æ–‡æ¡£ï¼šhttps://www.gnu.org/software/sed/manual/sed.html
