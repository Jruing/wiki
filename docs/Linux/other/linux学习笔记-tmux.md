# ğŸ§ Linux `tmux` ä½¿ç”¨æ‰‹å†Œ

> `tmux`ï¼ˆTerminal Multiplexerï¼‰æ˜¯ä¸€ä¸ªç»ˆç«¯å¤šè·¯å¤ç”¨å™¨ï¼Œå…è®¸ä½ åœ¨ä¸€ä¸ªç»ˆç«¯çª—å£ä¸­ç®¡ç†å¤šä¸ªç»ˆç«¯ä¼šè¯ï¼Œå¹¶ä¸”å¯ä»¥åœ¨æ–­å¼€è¿æ¥åé‡æ–°è¿æ¥è¿™äº›ä¼šè¯ã€‚

---

## ä¸€ã€å®‰è£… tmux

å¤§å¤šæ•° Linux å‘è¡Œç‰ˆé»˜è®¤å·²å®‰è£… `tmux`ã€‚å¦‚æœæ²¡æœ‰ï¼Œå¯ä»¥ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼š

- Debian/Ubuntu:
  ```bash
  sudo apt install tmux
  ```

- CentOS/RHEL:
  ```bash
  sudo yum install tmux
  ```

- Fedora:
  ```bash
  sudo dnf install tmux
  ```

---

## äºŒã€åŸºæœ¬ä½¿ç”¨

### 1. å¯åŠ¨ä¸€ä¸ªæ–°çš„ä¼šè¯

```bash
tmux
```

### 2. å¯åŠ¨å‘½åä¼šè¯ï¼ˆæ¨èï¼‰

```bash
tmux new -s session_name
```
ä¾‹å¦‚ï¼š
```bash
tmux new -s work
```

### 3. æŸ¥çœ‹æ‰€æœ‰ä¼šè¯

```bash
tmux ls
```

è¾“å‡ºç¤ºä¾‹ï¼š
```
0: 1 windows (created Tue Jun 10 10:00:00 2025)
work: 2 windows (created Tue Jun 10 10:05:00 2025)
```

### 4. æ¢å¤æŸä¸ªä¼šè¯

```bash
tmux attach -t session_name
```
ä¾‹å¦‚ï¼š
```bash
tmux attach -t work
```

### 5. æ–­å¼€ä¼šè¯ï¼ˆDetachï¼‰

åœ¨ tmux ä¸­æŒ‰ä¸‹ç»„åˆé”®ï¼š
```
Ctrl + b ç„¶åæŒ‰ d
```

### 6. ç»“æŸä¼šè¯

åœ¨ tmux ä¼šè¯ä¸­è¾“å…¥ï¼š
```bash
exit
```
æˆ–ä½¿ç”¨å‘½ä»¤å¼ºåˆ¶ç»“æŸï¼š
```bash
tmux kill-session -t session_name
```

---

## ä¸‰ã€å¸¸ç”¨å¿«æ·é”®ï¼ˆå‰ç¼€ï¼š`Ctrl + b`ï¼‰

> æ‰€æœ‰å¿«æ·é”®æ“ä½œéƒ½åœ¨è¿›å…¥ tmux ä¼šè¯åç”Ÿæ•ˆã€‚

| å¿«æ·é”®                  | åŠŸèƒ½                                |
| ----------------------- | ----------------------------------- |
| `Ctrl + b c`            | åˆ›å»ºæ–°çª—å£                          |
| `Ctrl + b n`            | åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªçª—å£                    |
| `Ctrl + b p`            | åˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªçª—å£                    |
| `Ctrl + b w`            | æ˜¾ç¤ºçª—å£åˆ—è¡¨å¹¶åˆ‡æ¢                  |
| `Ctrl + b l`            | åˆ‡æ¢åˆ°æœ€åä½¿ç”¨çš„çª—å£                |
| `Ctrl + b ,`            | é‡å‘½åå½“å‰çª—å£                      |
| `Ctrl + b %`            | å‚ç›´åˆ†å‰²çª—æ ¼                        |
| `Ctrl + b "` ï¼ˆåŒå¼•å·ï¼‰ | æ°´å¹³åˆ†å‰²çª—æ ¼                        |
| `Ctrl + b o`            | åœ¨ä¸åŒçª—æ ¼ä¹‹é—´åˆ‡æ¢                  |
| `Ctrl + b x`            | å…³é—­å½“å‰çª—æ ¼                        |
| `Ctrl + b [`            | è¿›å…¥å¤åˆ¶æ¨¡å¼ï¼ˆæ»šåŠ¨ã€é€‰æ‹©æ–‡æœ¬ï¼‰      |
| `Ctrl + b :`            | è¾“å…¥ tmux å‘½ä»¤ï¼ˆå¦‚ `kill-session`ï¼‰ |

---

## å››ã€é«˜çº§åŠŸèƒ½

### 1. å¤šäººå…±äº«ä¼šè¯

```bash
tmux attach -t session_name
```
å¤šä¸ªç”¨æˆ·å¯ä»¥åŒæ—¶è¿æ¥åˆ°åŒä¸€ä¸ªä¼šè¯ï¼Œé€‚åˆåä½œè°ƒè¯•ã€‚

### 2. åå°è¿è¡Œä»»åŠ¡å¹¶æŸ¥çœ‹æ—¥å¿—

```bash
tmux new -d -s mytask 'ping google.com'
```
ç„¶åæ¢å¤æŸ¥çœ‹ï¼š
```bash
tmux attach -t mytask
```

### 3. åˆ†å±æ“ä½œ

- å‚ç›´åˆ†å±ï¼š
  ```
  Ctrl + b %
  ```

- æ°´å¹³åˆ†å±ï¼š
  ```
  Ctrl + b "
  ```

- åˆ‡æ¢çª—æ ¼ï¼š
  ```
  Ctrl + b o
  ```

- è°ƒæ•´çª—æ ¼å¤§å°ï¼ˆè¿›å…¥è°ƒæ•´æ¨¡å¼ï¼‰ï¼š
  ```
  Ctrl + b Alt + æ–¹å‘é”®
  ```

---

## äº”ã€é…ç½®æ–‡ä»¶ï¼ˆ~/.tmux.confï¼‰

ä½ å¯ä»¥é€šè¿‡ç¼–è¾‘ `~/.tmux.conf` è‡ªå®šä¹‰ `tmux` è¡Œä¸ºã€‚ä»¥ä¸‹æ˜¯å‡ ä¸ªå¸¸ç”¨é…ç½®ç¤ºä¾‹ï¼š

```bash
# è®¾ç½®å‰ç¼€ä¸º Ctrl + aï¼ˆä»£æ›¿é»˜è®¤çš„ Ctrl + bï¼‰
set-option -g prefix C-a
unbind C-b
bind C-a send-prefix

# å¯ç”¨é¼ æ ‡æ”¯æŒï¼ˆéœ€è¦ tmux 2.1+ï¼‰
set -g mouse on

# è®¾ç½®çŠ¶æ€æ é¢œè‰²
set -g status-bg black
set -g status-fg white

# æ˜¾ç¤ºçª—å£åˆ—è¡¨
set -g status-left '#(whoami)@#H'

# è®¾ç½®çª—å£è‡ªåŠ¨å‘½å
set-option -g allow-rename off
```

åŠ è½½é…ç½®æ–‡ä»¶ï¼š
```bash
tmux source-file ~/.tmux.conf
```

---

## å…­ã€å¸¸ç”¨å‘½ä»¤æ€»ç»“

| æ“ä½œ               | å‘½ä»¤                                                  |
| ------------------ | ----------------------------------------------------- |
| åˆ—å‡ºä¼šè¯           | `tmux ls`                                             |
| æ–°å»ºä¼šè¯           | `tmux new -s session_name`                            |
| æ¢å¤ä¼šè¯           | `tmux attach -t session_name`                         |
| å¼ºåˆ¶æ¢å¤ä¼šè¯       | `tmux attach -t session_name -d`                      |
| ç»“æŸä¼šè¯           | `tmux kill-session -t session_name`                   |
| é‡å‘½åä¼šè¯         | `tmux rename-session -t old_name new_name`            |
| å‘é€å‘½ä»¤åˆ°åå°ä¼šè¯ | `tmux send-keys -t session_name 'your_command' Enter` |

---

## ä¸ƒã€å¸¸è§é—®é¢˜

### Q: å¦‚ä½•é€€å‡ºå¤åˆ¶æ¨¡å¼ï¼Ÿ

A: æŒ‰ `q` é”®å³å¯é€€å‡ºã€‚

### Q: å‡ºç° `no current session` é”™è¯¯ï¼Ÿ

A: è¯´æ˜ä½ æ²¡æœ‰åœ¨ tmux ä¼šè¯ä¸­æ‰§è¡Œå‘½ä»¤ï¼Œè¯·å…ˆè¿›å…¥ä¸€ä¸ªä¼šè¯ã€‚

### Q: å¦‚ä½•è®¾ç½®çª—å£æ ‡é¢˜ï¼Ÿ

A: åœ¨ `.tmux.conf` ä¸­æ·»åŠ ï¼š
```bash
set-option -g set-titles on
set-option -g set-titles-string "#T"
```

---

## å…«ã€ç¤ºä¾‹æµç¨‹

### ç¤ºä¾‹ 1ï¼šå¯åŠ¨åå°ä»»åŠ¡å¹¶æŸ¥çœ‹è¾“å‡º

```bash
tmux new -d -s task 'ping baidu.com'
tmux attach -t task
```

### ç¤ºä¾‹ 2ï¼šåˆ›å»ºå¤šä¸ªçª—å£å¹¶åˆ‡æ¢

```bash
tmux new -s demo
Ctrl + b c      # åˆ›å»ºç¬¬äºŒä¸ªçª—å£
Ctrl + b w      # æŸ¥çœ‹çª—å£åˆ—è¡¨
Ctrl + b n/p    # åˆ‡æ¢çª—å£
```

---

## âœ… å°æŠ€å·§

- ğŸ’¡ ä½¿ç”¨å‘½åä¼šè¯æ›´å®¹æ˜“ç®¡ç†å¤šä¸ªä»»åŠ¡ã€‚
- ğŸ’¡ é¼ æ ‡æ”¯æŒ (`mouse on`) å¯ä»¥æ–¹ä¾¿åœ°ç‚¹å‡»åˆ‡æ¢çª—æ ¼ã€‚
- ğŸ’¡ ä½¿ç”¨ `Ctrl + b [` è¿›å…¥å¤åˆ¶æ¨¡å¼åï¼ŒæŒ‰ `Enter` å¼€å§‹é€‰ä¸­ï¼Œå†æŒ‰ `Enter` å¤åˆ¶ã€‚
- ğŸ’¡ ä½¿ç”¨æ’ä»¶ç³»ç»Ÿï¼ˆå¦‚ [tpm](https://github.com/tmux-plugins/tpm)ï¼‰å¯ä»¥æ‰©å±•åŠŸèƒ½ï¼ˆå¦‚ CPU ç›‘æ§ã€è‡ªåŠ¨è¡¥å…¨ç­‰ï¼‰ã€‚

---

